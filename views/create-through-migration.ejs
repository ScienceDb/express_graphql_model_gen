'use strict';

module.exports = {

  up: function(queryInterface, Sequelize){
    return queryInterface.createTable('<%-keysIn-%>', {

      createdAt: {
        type: Sequelize.DATE
      },

      updatedAt: {
        type: Sequelize.DATE
      },

      <%- sourceKey-%>:{
        type: Sequelize.INTEGER,
        onDelete: 'CASCADE',
        references:{
          model: '<%-source-%>',
          key: 'id'
        }
      },

      <%- targetKey-%>:{
        type: Sequelize.INTEGER,
        onDelete: 'CASCADE',
        references:{
          model: '<%-target_pl.toLowerCase()-%>',
          key: 'id'
        }
      }
    }).then(()=>{
      return queryInterface.addIndex('<%-keysIn-%>', ['<%- sourceKey-%>']);
    }).then(()=>{
      return queryInterface.addIndex('<%-keysIn-%>', ['<%- targetKey-%>']);
    });
  },

  down: function(queryInterface, Sequelize){
    return queryInterface.dropTable('<%-keysIn-%>');
  }

};
